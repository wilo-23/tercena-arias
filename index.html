<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TERCENA ARIAS POS EMPRESARIAL</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{font-family:Segoe UI;background:#f1f5f9}
.dark{background:#0f172a;color:white}
.btn{background:#b91c1c;color:white;border-radius:12px;font-weight:800;height:70px}
.hidden{display:none}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login" class="fixed inset-0 bg-black flex items-center justify-center z-50">
<div class="bg-white p-8 rounded-2xl text-center w-80">
<img src="logotipo.png" class="w-20 mx-auto mb-4">
<h2 class="font-bold mb-2">Ingresar PIN</h2>
<input type="password" id="pinInput" class="border p-2 w-full text-center text-xl mb-4">
<button onclick="login()" class="bg-green-600 text-white w-full py-2 rounded">Entrar</button>
</div>
</div>

<header class="bg-red-700 text-white p-4 flex justify-between">
<div class="flex items-center gap-3">
<img src="logotipo.png" class="w-10">
<h1 class="font-black">TERCENA ARIAS</h1>
</div>
<div>
Saldo: <span id="saldo">$0.00</span>
</div>
</header>

<div class="flex">

<!-- PRODUCTOS -->
<div class="w-1/2 p-3 grid grid-cols-2 gap-3 bg-gray-100 min-h-screen">
<button onclick="addItem('Pollo Entero')" class="btn">Pollo Entero</button>
<button onclick="addItem('Pollo Libras')" class="btn">Pollo Libras</button>
<button onclick="addItem('Alas')" class="btn">Alas</button>
<button onclick="addItem('Pechuga')" class="btn">Pechuga</button>
<button onclick="addItem('Menudo')" class="btn">Menudo</button>
<button onclick="addItem('Otros')" class="btn bg-gray-600">Otros</button>
</div>

<!-- TICKET -->
<div class="w-1/2 bg-white flex flex-col">
<div class="bg-yellow-400 p-4 text-center">
<h2 id="total" class="text-3xl font-black">$0.00</h2>
</div>
<div id="ticket" class="flex-1 overflow-y-auto p-2"></div>

<div class="p-4 space-y-2">
<select id="metodoPago" class="w-full border p-2">
<option value="Efectivo">Efectivo</option>
<option value="Transferencia">Transferencia</option>
</select>

<input type="number" id="recibido" placeholder="Monto recibido (si efectivo)" class="w-full border p-2">

<button onclick="cobrar()" class="bg-black text-white py-3 rounded w-full font-bold">
COBRAR
</button>
</div>
</div>
</div>

<!-- PANEL ADMIN -->
<div class="p-4 bg-white border-t space-y-2">
<div id="dashboard"></div>
<div class="flex gap-2 flex-wrap">
<button onclick="abrirCaja()" class="bg-green-600 text-white px-3 py-2 rounded">Abrir Caja</button>
<button onclick="arqueo()" class="bg-yellow-600 text-white px-3 py-2 rounded">Arqueo</button>
<button onclick="verHistorial()" class="bg-blue-600 text-white px-3 py-2 rounded">Historial</button>
<button onclick="registrarGasto()" class="bg-red-600 text-white px-3 py-2 rounded">Gasto</button>
<button onclick="cerrarCaja()" class="bg-black text-white px-3 py-2 rounded">Cerrar Caja</button>
<button onclick="toggleDark()" class="bg-purple-600 text-white px-3 py-2 rounded">Modo Oscuro</button>
</div>
</div>

<script>
let db = JSON.parse(localStorage.getItem("posEmpresarial")) || {
pin:"1234",
saldo:0,
abierta:false,
ventas:[],
gastos:[],
carrito:[]
};

function save(){ localStorage.setItem("posEmpresarial",JSON.stringify(db)); }

function login(){
if(document.getElementById("pinInput").value===db.pin){
document.getElementById("login").style.display="none";
update();
}else alert("PIN incorrecto");
}

function abrirCaja(){
if(db.abierta){ alert("Ya está abierta"); return;}
let monto=parseFloat(prompt("Saldo inicial:"));
if(!isNaN(monto)){
db.saldo=monto;
db.abierta=true;
save();update();
}
}

function addItem(nombre){
if(!db.abierta){ alert("Caja cerrada"); return;}
let precio=parseFloat(prompt("Precio de "+nombre));
if(precio>0){
db.carrito.push({nombre,precio});
render();
save();
}
}

function render(){
let html="";
let total=0;
db.carrito.forEach((i,index)=>{
total+=i.precio;
html+=`<div class="flex justify-between bg-gray-100 p-2 rounded mb-1">
<span>${i.nombre}</span>
<span>$${i.precio.toFixed(2)}</span>
</div>`;
});
document.getElementById("ticket").innerHTML=html;
document.getElementById("total").innerText="$"+total.toFixed(2);
}

function cobrar(){
if(!db.abierta) return alert("Caja cerrada");
if(db.carrito.length==0) return;

let metodo=document.getElementById("metodoPago").value;
let total=db.carrito.reduce((s,i)=>s+i.precio,0);

if(metodo==="Efectivo"){
let recibido=parseFloat(document.getElementById("recibido").value);
if(recibido<total) return alert("Dinero insuficiente");
alert("Cambio: $"+(recibido-total).toFixed(2));
}

db.saldo+=total;
db.ventas.unshift({
fecha:new Date().toLocaleString(),
items:[...db.carrito],
total,
metodo
});

db.carrito=[];
render();
update();
save();
}

function registrarGasto(){
let monto=parseFloat(prompt("Monto gasto"));
let desc=prompt("Descripción");
if(monto>0){
db.saldo-=monto;
db.gastos.unshift({fecha:new Date().toLocaleString(),monto,desc});
save();update();
}
}

function verHistorial(){
let texto="VENTAS:\n\n";
db.ventas.forEach(v=>{
texto+=v.fecha+" - $"+v.total.toFixed(2)+" ("+v.metodo+")\n";
});
alert(texto);
}

function arqueo(){
alert("Saldo actual: $"+db.saldo.toFixed(2));
}

function cerrarCaja(){
if(!db.abierta) return;
alert("Caja cerrada\nSaldo final: $"+db.saldo.toFixed(2));
db.abierta=false;
db.carrito=[];
save();location.reload();
}

function update(){
document.getElementById("saldo").innerText="$"+db.saldo.toFixed(2);
let totalVentas=db.ventas.reduce((s,v)=>s+v.total,0);
let totalGastos=db.gastos.reduce((s,g)=>s+g.monto,0);
document.getElementById("dashboard").innerText=
"Ventas: $"+totalVentas.toFixed(2)+" | Gastos: $"+totalGastos.toFixed(2);
}

function toggleDark(){ document.body.classList.toggle("dark"); }

update();
render();
</script>

</body>
</html>
