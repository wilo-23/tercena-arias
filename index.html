<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WILSON POS PRO</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body { margin:0; font-family:Segoe UI; background:#f1f5f9; overflow:hidden; }
.sidebar { width:220px; background:#111827; color:white; }
.sidebar button { width:100%; padding:16px; text-align:left; font-weight:bold; border-bottom:1px solid #1f2937; }
.sidebar button:hover { background:#1f2937; }
.tab-active { background:#7c2d12 !important; }
.product-btn {
    background:#b91c1c;
    color:white;
    font-weight:bold;
    border-radius:12px;
    height:80px;
    font-size:14px;
}
.product-btn:active { transform:scale(0.95); }

.ticket {
    width:280px;
    font-family:monospace;
    font-size:12px;
}
.hidden { display:none; }
</style>
</head>
<body class="flex h-screen">

<!-- SIDEBAR -->
<div class="sidebar flex flex-col">
    <div class="p-4 text-center border-b border-gray-700">
        <img src="logotipo.png" class="w-20 mx-auto mb-2">
        <h1 class="font-black text-sm">WILSON POS PRO</h1>
    </div>
    <button onclick="ver('vender')" id="btn-vender" class="tab-active">ðŸ›’ Vender</button>
    <button onclick="ver('historial')" id="btn-historial">ðŸ“‹ Ventas</button>
    <button onclick="ver('gastos')" id="btn-gastos">ðŸ’¸ Gastos</button>
    <button onclick="ver('movimientos')" id="btn-movimientos">ðŸ“Š Movimientos</button>
</div>

<!-- CONTENIDO -->
<div class="flex-1 flex flex-col">

<!-- HEADER -->
<div class="bg-white shadow p-4 flex justify-between items-center">
    <div>
        <h2 class="font-black text-xl">TERCENA ARIAS</h2>
        <p class="text-xs text-gray-500" id="fecha-hoy"></p>
    </div>
    <div class="text-right">
        <p class="text-xs text-gray-500">Saldo Caja</p>
        <p id="saldo" class="text-2xl font-black text-green-600">$0.00</p>
    </div>
</div>

<!-- VENDER -->
<div id="sec-vender" class="flex flex-1 overflow-hidden">

    <!-- PRODUCTOS -->
    <div class="w-1/2 p-4 grid grid-cols-2 gap-4 overflow-y-auto bg-slate-100">
        <button class="product-btn" onclick="agregar('Pollo Entero')">Pollo Entero</button>
        <button class="product-btn" onclick="agregar('Pechuga')">Pechuga</button>
        <button class="product-btn" onclick="agregar('Alas')">Alas</button>
        <button class="product-btn" onclick="agregar('Menudo')">Menudo</button>
        <button class="product-btn bg-gray-700" onclick="agregar('Otros')">Otros</button>
    </div>

    <!-- TICKET -->
    <div class="w-1/2 bg-white flex flex-col border-l">
        <div class="p-4 bg-yellow-400 text-center">
            <h2 id="total" class="text-3xl font-black">$0.00</h2>
        </div>
        <div id="lista" class="flex-1 overflow-y-auto p-4 space-y-2"></div>
        <button onclick="cobrar()" class="m-4 bg-black text-white py-4 rounded-xl font-black text-lg">
            COBRAR
        </button>
    </div>
</div>

<!-- HISTORIAL -->
<div id="sec-historial" class="hidden flex-1 p-6 overflow-y-auto">
    <h3 class="font-black mb-4">Ventas del DÃ­a</h3>
    <div id="render-historial" class="space-y-2"></div>
</div>

<!-- GASTOS -->
<div id="sec-gastos" class="hidden flex-1 p-6 overflow-y-auto">
    <button onclick="nuevoGasto()" class="bg-red-600 text-white px-6 py-3 rounded-xl font-bold mb-6">
        + Registrar Gasto
    </button>
    <div id="render-gastos" class="space-y-2"></div>
</div>

<!-- MOVIMIENTOS -->
<div id="sec-movimientos" class="hidden flex-1 p-6 overflow-y-auto">
    <h3 class="font-black mb-4">Movimientos de Caja</h3>
    <div id="render-movimientos" class="space-y-2"></div>
</div>

</div>

<!-- MODAL PRECIO -->
<div id="modal-precio" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center">
    <div class="bg-white p-8 rounded-2xl text-center">
        <h3 id="producto-nombre" class="font-black text-lg mb-4"></h3>
        <input type="number" id="input-precio" class="border p-3 text-xl w-48 text-center">
        <br><br>
        <button onclick="confirmarPrecio()" class="bg-green-600 text-white px-6 py-3 rounded-xl font-bold">
            Agregar
        </button>
    </div>
</div>

<!-- MODAL TICKET -->
<div id="modal-ticket" class="hidden fixed inset-0 bg-black/90 flex items-center justify-center">
    <div class="bg-white p-6 ticket">
        <div class="text-center">
            <img src="logotipo.png" class="w-20 mx-auto">
            <p>TERCENA ARIAS</p>
            <p id="ticket-fecha"></p>
        </div>
        <hr>
        <div id="ticket-items"></div>
        <hr>
        <p class="text-right font-bold" id="ticket-total"></p>
        <br>
        <button onclick="imprimir()" class="bg-green-600 text-white w-full py-2">Imprimir</button>
        <button onclick="cerrarTicket()" class="bg-gray-800 text-white w-full py-2 mt-2">Cerrar</button>
    </div>
</div>

<script>
let db = JSON.parse(localStorage.getItem('wilson_pos')) || {
    saldo:0, ventas:[], gastos:[], movimientos:[], carrito:[]
};

let productoActual = "";

function guardar(){ localStorage.setItem('wilson_pos', JSON.stringify(db)); }

function ver(sec){
    ['vender','historial','gastos','movimientos'].forEach(s=>{
        document.getElementById('sec-'+s).classList.add('hidden');
        document.getElementById('btn-'+s).classList.remove('tab-active');
    });
    document.getElementById('sec-'+sec).classList.remove('hidden');
    document.getElementById('btn-'+sec).classList.add('tab-active');
}

function agregar(nombre){
    productoActual = nombre;
    document.getElementById('producto-nombre').innerText = nombre;
    document.getElementById('modal-precio').classList.remove('hidden');
}

function confirmarPrecio(){
    let precio = parseFloat(document.getElementById('input-precio').value);
    if(!precio) return;
    db.carrito.push({nombre:productoActual, precio});
    document.getElementById('modal-precio').classList.add('hidden');
    document.getElementById('input-precio').value="";
    pintarCarrito();
    guardar();
}

function pintarCarrito(){
    let lista=document.getElementById('lista');
    lista.innerHTML="";
    let total=0;
    db.carrito.forEach((p,i)=>{
        total+=p.precio;
        lista.innerHTML+=`
        <div class="flex justify-between bg-gray-100 p-3 rounded">
            <span>${p.nombre}</span>
            <span>$${p.precio.toFixed(2)}</span>
        </div>`;
    });
    document.getElementById('total').innerText="$"+total.toFixed(2);
}

function cobrar(){
    if(db.carrito.length===0) return;
    let total=db.carrito.reduce((a,b)=>a+b.precio,0);
    let venta={fecha:new Date().toLocaleString(), items:[...db.carrito], total};
    db.ventas.unshift(venta);
    db.saldo+=total;
    db.movimientos.unshift({tipo:"VENTA", monto:total, fecha:new Date().toLocaleString()});
    db.carrito=[];
    guardar();
    pintarCarrito();
    actualizar();
    mostrarTicket(venta);
}

function mostrarTicket(v){
    document.getElementById('ticket-fecha').innerText=v.fecha;
    document.getElementById('ticket-items').innerHTML=
        v.items.map(i=>`<div class="flex justify-between"><span>${i.nombre}</span><span>$${i.precio.toFixed(2)}</span></div>`).join("");
    document.getElementById('ticket-total').innerText="TOTAL: $"+v.total.toFixed(2);
    document.getElementById('modal-ticket').classList.remove('hidden');
}

function cerrarTicket(){ document.getElementById('modal-ticket').classList.add('hidden'); }

function imprimir(){ window.print(); }

function nuevoGasto(){
    let monto=parseFloat(prompt("Monto gasto"));
    let motivo=prompt("Motivo");
    if(!monto||!motivo) return;
    db.gastos.unshift({monto,motivo});
    db.saldo-=monto;
    db.movimientos.unshift({tipo:"GASTO", monto:-monto, fecha:new Date().toLocaleString()});
    guardar();
    actualizar();
}

function actualizar(){
    document.getElementById('saldo').innerText="$"+db.saldo.toFixed(2);
    document.getElementById('render-historial').innerHTML=
        db.ventas.map(v=>`<div class="bg-gray-100 p-3 rounded flex justify-between">
        <span>${v.fecha}</span><span>$${v.total.toFixed(2)}</span></div>`).join("");
    document.getElementById('render-gastos').innerHTML=
        db.gastos.map(g=>`<div class="bg-red-100 p-3 rounded flex justify-between">
        <span>${g.motivo}</span><span>-$${g.monto.toFixed(2)}</span></div>`).join("");
    document.getElementById('render-movimientos').innerHTML=
        db.movimientos.map(m=>`<div class="bg-gray-200 p-3 rounded flex justify-between">
        <span>${m.tipo}</span><span>$${m.monto.toFixed(2)}</span></div>`).join("");
}

actualizar();
document.getElementById('fecha-hoy').innerText=new Date().toLocaleDateString();
</script>
</body>
</html>
 
